[phases.setup]
# Install dependencies and prepare the build environment
nixPkgs = ['nodejs-18_x', 'npm-9_x', 'git']

[phases.install]
# Install dependencies
cmds = [
  'npm ci --only=production --silent',
  'npm run build'
]

[phases.build]
# Build the application (already done in install phase)
cmds = []

[staticAssets]
# Copy built files for static serving
files = ['dist/**/*']
# Default static file path
path = '/workspace/default'

[start]
# Start the web server
cmd = 'npx serve dist -s -l $PORT'